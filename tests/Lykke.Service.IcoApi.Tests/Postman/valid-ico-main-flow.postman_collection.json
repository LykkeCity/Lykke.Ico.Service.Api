{
	"info": {
		"_postman_id": "ff81cae8-334c-426d-aeac-37374408c67d",
		"name": "SmartContainers ICO - Main Flow",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Remove Investor",
			"description": null,
			"item": [
				{
					"name": "/api/debug/investors/{email} - delete investor",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{domain}}/api/debug/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/debug/investors/{email}/all - delete all investor data",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(204);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{domain}}/api/debug/investors/{{email}}/all",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"investors",
								"{{email}}",
								"all"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Check Rates Service",
			"description": null,
			"item": [
				{
					"name": "/api/debug/rates/latest - recheck rates availability",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Rates exists\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.averageRate !== null).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/debug/rates/latest",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"rates",
								"latest"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Register Investor",
			"description": null,
			"item": [
				{
					"name": "/api/admin/campaign/info - remember campaign data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ea0c0f6d-6b21-486c-a7e2-8db42e85af32",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember campaign data\", function() {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investorsRegistered\", (typeof jsonData.investorsRegistered === 'undefined') ? 0 : jsonData.investorsRegistered);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - remember history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "22ec67a0-2961-4c3b-889f-c9371f6695b8",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember investor history\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-history-size\", (typeof jsonData.items === 'undefined') ? 0 : jsonData.items.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - remember emails number",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Emails sent number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-emails-size\", (typeof jsonData.emails === 'undefined') ? 0 : jsonData.emails.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/investor/register - register investor",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Register investor\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.result).to.eql(\"confirmationEmailSent\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"{{email}}\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/investor/register",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"investor",
								"register"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - wait confirmation email",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "efb6e69c-93fb-41c0-a99f-54a6a4bab252",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"var current = Number(jsonData.emails.count());",
									"var expected = Number(pm.environment.get(\"investor-emails-size\")) + 1;",
									"",
									"if(current == expected){",
									"    console.info(\"Email recieved\");",
									"} else {",
									"    console.info(\"Wait 10 secs\");",
									"    setTimeout(function(){}, 10000);",
									"    postman.setNextRequest(\"/api/admin/investors/{email}/emails - wait confirmation email\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/campaign/info - check campaign changes",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c0c665ba-0470-4a17-a7db-18f71be0b889",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"investorsRegistered is increased to 1\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.investorsRegistered)).to.eql(Number(pm.environment.get(\"investorsRegistered\")) + 1);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - check investor history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d6ae53d1-84dc-419a-8c20-db772406d8c5",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"1 new record in profile history (add)\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.items.count());",
									"    var expected = Number(pm.environment.get(\"investor-history-size\")) + 1;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"    pm.environment.set(\"investor-history-size\", current);    ",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						},
						"description": "recheck investor changes history"
					},
					"response": []
				}
			]
		},
		{
			"name": "Confirm Investor",
			"description": null,
			"item": [
				{
					"name": "/api/admin/campaign/info - remember campaign data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d999a6e2-5328-4654-9dac-6aea7a33a9c9",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember campaign data\", function() {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investorsConfirmed\", (typeof jsonData.investorsConfirmed === 'undefined') ? 0 : jsonData.investorsConfirmed);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - remember history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "07e6068e-1d97-4f16-9b1b-1e981a43a1fd",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember investor history\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-history-size\", (typeof jsonData.items === 'undefined') ? 0 : jsonData.items.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - get confirmation token",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"Recheck and remember confirmation token\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.email).to.eql(pm.environment.get(\"email\"));",
									"",
									"    pm.environment.set(\"confirmation_token\", jsonData.confirmationToken);    ",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/investor/confirmation/{token} - confirm user",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Confirm user and recieve auth token\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.authToken).to.eql(pm.environment.get(\"confirmation_token\"));",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/investor/confirmation/{{confirmation_token}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"investor",
								"confirmation",
								"{{confirmation_token}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - recheck confirmation",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"Recheck confirmed datetime value\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.confirmedUtc !== null).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/campaign/info - check campaign changes",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "46406d5f-f347-4b65-affb-642b111b14de",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"investorsConfirmed is increased to 1\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.investorsConfirmed)).to.eql(Number(pm.environment.get(\"investorsConfirmed\")) + 1);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - check investor history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "6aaf4a0f-56b2-46c5-b520-8d3e6364a0e5",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"1 new record in profile history (confirm)\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.items.count());",
									"    var expected = Number(pm.environment.get(\"investor-history-size\")) + 1;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"    pm.environment.set(\"investor-history-size\", current);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						},
						"description": "recheck investor changes history"
					},
					"response": []
				}
			]
		},
		{
			"name": "Update Addresses",
			"description": null,
			"item": [
				{
					"name": "/api/admin/campaign/info - remember campaign data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d7210fbf-880f-42cd-b931-443af6eca370",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember campaign data\", function() {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"addressPoolCurrentSize\", (typeof jsonData.addressPoolCurrentSize === 'undefined') ? 0 : jsonData.addressPoolCurrentSize);",
									"    pm.environment.set(\"investorsFilledIn\", (typeof jsonData.investorsFilledIn === 'undefined') ? 0 : jsonData.investorsFilledIn);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - remember history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a061993e-ad35-420a-811b-0cb3b12e2889",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember investor history\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-history-size\", (typeof jsonData.items === 'undefined') ? 0 : jsonData.items.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - remember emails number",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Emails sent number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-emails-size\", (typeof jsonData.emails === 'undefined') ? 0 : jsonData.emails.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/debug/eth/address/random - get token address",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Get token Address\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"token_address\", jsonData.address);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/debug/eth/address/random",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"eth",
								"address",
								"random"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/debug/eth/address/random - get eth refund address",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Get eth refund Address\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"refund_eth_address\", jsonData.address);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/debug/eth/address/random",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"eth",
								"address",
								"random"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/debug/btc/address/random - get btc refund address",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Get btc refund address\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"refund_btc_address\", jsonData.address);    ",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/debug/btc/address/random",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"btc",
								"address",
								"random"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/investor - update investor addresses",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "authToken",
								"value": "{{confirmation_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"tokenAddress\": \"{{token_address}}\",\r\n  \"refundEthAddress\": \"{{refund_eth_address}}\",\r\n  \"refundBtcAddress\": \"{{refund_btc_address}}\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/investor",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"investor"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/investor - wait pay-in addresses",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c8320e83-e8c0-469f-8111-1fa672a5b4f9",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"var current = jsonData.payInAddressesAssigned;",
									"var expected = true;",
									"",
									"if(current == expected){",
									"    console.info(\"Pay-in addresses assigned\");",
									"} else {",
									"    console.info(\"Wait 2 secs\");",
									"    setTimeout(function(){}, 2000);",
									"    postman.setNextRequest(\"/api/investor - wait pay-in addresses\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "authToken",
								"value": "{{confirmation_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/investor",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"investor"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/investor - check investor addresses changes",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "19c49405-d558-4265-8a63-eea02aed193d",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"token address is valid\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.tokenAddress).to.eql(pm.environment.get(\"token_address\"));",
									"});",
									"",
									"pm.test(\"refund eth address is valid\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.refundEthAddress).to.eql(pm.environment.get(\"refund_eth_address\"));",
									"});",
									"",
									"pm.test(\"refund btc address is valid\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.refundBtcAddress).to.eql(pm.environment.get(\"refund_btc_address\"));",
									"});",
									"",
									"pm.test(\"payInSmarcEthAddress eth address is not empty\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.payInSmarcEthAddress !== null).to.be.true;",
									"});",
									"",
									"pm.test(\"payInSmarcBtcAddress btc address is not empty\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.payInSmarcBtcAddress !== null).to.be.true;",
									"});",
									"",
									"pm.test(\"payInLogiEthAddress eth address is not empty\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.payInLogiEthAddress !== null).to.be.true;",
									"});",
									"",
									"pm.test(\"payInLogiBtcAddress btc address is not empty\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.payInLogiBtcAddress !== null).to.be.true;",
									"});",
									"",
									"pm.test(\"payInSmarc90Logi10EthAddress eth address is not empty\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.payInSmarc90Logi10EthAddress !== null).to.be.true;",
									"});",
									"",
									"pm.test(\"payInSmarc90Logi10BtcAddress btc address is not empty\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.payInSmarc90Logi10BtcAddress !== null).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "authToken",
								"value": "{{confirmation_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/investor",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"investor"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/campaign/info - check campaign changes",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f5cfd675-0295-44e2-845a-4979a66be9fa",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"addressPoolCurrentSize is descreased to 3\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.addressPoolCurrentSize)).to.eql(Number(pm.environment.get(\"addressPoolCurrentSize\")) - 3);",
									"});",
									"",
									"pm.test(\"investorsFilledIn is increased to 1\", function() {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.investorsFilledIn);",
									"    var expected = Number(pm.environment.get(\"investorsFilledIn\")) + 1;",
									"    ",
									"    console.info(\"current: \" + current);",
									"    console.info(\"expected: \" + expected);",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - wait summary email",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "66fa384d-a50d-4e8b-bc18-2f816c18f8e6",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"var current = Number(jsonData.emails.count());",
									"var expected = Number(pm.environment.get(\"investor-emails-size\")) + 1;",
									"",
									"if(current == expected){",
									"    console.info(\"Email recieved\");",
									"} else {",
									"    console.info(\"Wait 10 secs\");",
									"    setTimeout(function(){}, 10000);",
									"    postman.setNextRequest(\"/api/admin/investors/{email}/emails - wait summary email\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - check investor history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "18213df8-703d-45cd-8992-68531afe0fd9",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"2 new record in profile history (update addresses & assign pay-in addresses)\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.items.count());",
									"    var expected = Number(pm.environment.get(\"investor-history-size\")) + 2;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"    pm.environment.set(\"investor-history-size\", current);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						},
						"description": "recheck investor changes history"
					},
					"response": []
				}
			]
		},
		{
			"name": "Send BTC Transaction - Presale & Smarc",
			"description": null,
			"item": [
				{
					"name": "/api/admin/campaign/info - remember campaign data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b78318e9-ccc9-4b9a-aefd-d580e0f4ef16",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember campaign data\", function() {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"amountPreSaleInvestedBtc\", (typeof jsonData.amountPreSaleInvestedBtc === 'undefined') ? 0 : jsonData.amountPreSaleInvestedBtc);",
									"    pm.environment.set(\"amountPreSaleInvestedSmarcToken\", (typeof jsonData.amountPreSaleInvestedSmarcToken === 'undefined') ? 0 : jsonData.amountPreSaleInvestedSmarcToken);",
									"    pm.environment.set(\"amountPreSaleInvestedUsd\", (typeof jsonData.amountPreSaleInvestedUsd === 'undefined') ? 0 : jsonData.amountPreSaleInvestedUsd);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - remember history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b937b967-ddab-45d9-a515-f127af307d28",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember investor history\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-history-size\", (typeof jsonData.items === 'undefined') ? 0 : jsonData.items.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - remember emails number",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Emails sent number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-emails-size\", (typeof jsonData.emails === 'undefined') ? 0 : jsonData.emails.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions - remember transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "98c845cd-7d7f-42bc-9042-a90952314ac8",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember transactions number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-transactions-size\", (typeof jsonData.transactions === 'undefined') ? 0 : jsonData.transactions.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - get pay-in address and amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4b850e2d-bdb3-4dd4-bc6c-694d9123fcaa",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"Get data\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.environment.set(\"payInSmarcBtcAddress\", jsonData.payInSmarcBtcAddress);",
									"    pm.environment.set(\"amountBtc\", jsonData.amountBtc);",
									"    pm.environment.set(\"amountUsd\", jsonData.amountUsd);",
									"    pm.environment.set(\"amountSmarcToken\", jsonData.amountSmarcToken);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/debug/btc/send/tx - send bitcoin transaction to queue",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"{{email}}\",\r\n  \"payInAddress\": \"{{payInSmarcBtcAddress}}\",\r\n  \"amount\": 0.012\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/debug/btc/send/tx",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"btc",
								"send",
								"tx"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - wait btc transaction email",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "48ff2579-41de-4cdd-9441-4b00bda67a82",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"var current = Number(jsonData.emails.count());",
									"var expected = Number(pm.environment.get(\"investor-emails-size\")) + 1;",
									"",
									"if(current == expected){",
									"    console.info(\"1 email recieved (1 transaction)\");",
									"} else {",
									"    console.info(\"Wait 10 secs\");",
									"    setTimeout(function(){}, 10000);",
									"    postman.setNextRequest(\"/api/admin/investors/{email}/emails - wait btc transaction email\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/campaign/info - check campaign amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "478b1484-aa0d-4265-a415-097a1938d64f",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedBtc is valid\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    console.info(\"jsonData.amountPreSaleInvestedBtc: \" + jsonData.amountPreSaleInvestedBtc);",
									"    var current = Number.parseFloat(jsonData.amountPreSaleInvestedBtc).toFixed(5);",
									"    ",
									"    console.info(\"environment.amountPreSaleInvestedBtc: \" + pm.environment.get(\"amountPreSaleInvestedBtc\"));",
									"    var expected = (Number.parseFloat(pm.environment.get(\"amountPreSaleInvestedBtc\")) + 0.012).toFixed(5);",
									"    ",
									"    pm.expect(expected).to.eql(current);",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedSmarcToken was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountPreSaleInvestedSmarcToken) > Number(pm.environment.get(\"amountPreSaleInvestedSmarcToken\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountInvestedUsd was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountPreSaleInvestedUsd) > Number(pm.environment.get(\"amountPreSaleInvestedUsd\"))).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - check investor amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "da526b47-d17a-4a57-9955-cd910f1b5f40",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"amountBtc is valid\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number.parseFloat(jsonData.amountBtc).toFixed(5);",
									"    var expected = (Number.parseFloat(pm.environment.get(\"amountBtc\")) + 0.012).toFixed(5);",
									"    ",
									"    pm.expect(expected).to.eql(current);",
									"});",
									"",
									"pm.test(\"amountUsd was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountUsd) > Number(pm.environment.get(\"amountUsd\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountSmarcToken was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountSmarcToken) > Number(pm.environment.get(\"amountSmarcToken\"))).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions - check transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d7238ec9-ba02-4bfc-b3e9-2d3e4fec6d26",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Must have 1 new transaction\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.transactions.count());",
									"    var expected = Number(pm.environment.get(\"investor-transactions-size\")) + 1;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - check investor history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f681a594-a2fa-46dd-89a0-70fbec98b063",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"1 new record in profile history (increment amounts)\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.items.count());",
									"    var expected = Number(pm.environment.get(\"investor-history-size\")) + 1;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						},
						"description": "recheck investor changes history"
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "a4216102-ad13-4d4c-8302-cee1952ca5f0",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "089d1180-6a9e-47f7-aea1-ad18ee429fc2",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Send ETH Transaction - Presale & Logi",
			"description": null,
			"item": [
				{
					"name": "/api/admin/campaign/info - remember campaign data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f4ada41e-617c-4be6-89cd-473f5b88ff9f",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember campaign data\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.environment.set(\"amountPreSaleInvestedEth\", (typeof jsonData.amountPreSaleInvestedEth === 'undefined') ? 0 : jsonData.amountPreSaleInvestedEth);",
									"    pm.environment.set(\"amountPreSaleInvestedLogiToken\", (typeof jsonData.amountPreSaleInvestedLogiToken === 'undefined') ? 0 : jsonData.amountPreSaleInvestedLogiToken);",
									"    pm.environment.set(\"amountPreSaleInvestedUsd\", (typeof jsonData.amountPreSaleInvestedUsd === 'undefined') ? 0 : jsonData.amountPreSaleInvestedUsd);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/campaign/settings - remember crowd sale dates",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b229a271-6174-4a07-8bad-630e02331ddd",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember campaign data\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    var crowdSaleStartDateTimeUtc = new Date(jsonData.crowdSaleStartDateTimeUtc);",
									"    console.info(\"crowdSaleStartDateTimeUtc: \" + crowdSaleStartDateTimeUtc);",
									"    ",
									"    var crowdSaleDateTimeUtc = crowdSaleStartDateTimeUtc.setDate(crowdSaleStartDateTimeUtc.getDate() + 1);",
									"    console.info(\"crowdSaleDateTimeUtc: \" + (new Date()).toISOString());",
									"",
									"    pm.environment.set(\"crowdSaleDateTimeUtc\", (new Date(crowdSaleDateTimeUtc)).toISOString());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/settings",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"settings"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - remember history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7fbef264-5c2d-4411-a9ae-08199599a9ee",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember investor history\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-history-size\", (typeof jsonData.items === 'undefined') ? 0 : jsonData.items.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - remember emails number",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Emails sent number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-emails-size\", (typeof jsonData.emails === 'undefined') ? 0 : jsonData.emails.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions - remember transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "98c845cd-7d7f-42bc-9042-a90952314ac8",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember transactions number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-transactions-size\", (typeof jsonData.transactions === 'undefined') ? 0 : jsonData.transactions.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - get pay-in address and amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "daf69f1b-f7cf-436f-b0fd-11f2aee047cf",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"Get data\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.environment.set(\"payInLogiEthAddress\", jsonData.payInLogiEthAddress);",
									"    pm.environment.set(\"amountEth\", jsonData.amountEth);",
									"    pm.environment.set(\"amountUsd\", jsonData.amountUsd);",
									"    pm.environment.set(\"amountLogiToken\", jsonData.amountLogiToken);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/debug/eth/send/tx - send ether transaction to queue",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"{{email}}\",\r\n  \"payInAddress\": \"{{payInLogiEthAddress}}\",\r\n  \"amount\": 0.8\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/debug/eth/send/tx",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"eth",
								"send",
								"tx"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - wait eth transaction emails",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1ae19f73-816a-4039-bbd9-39a436085474",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"var current = Number(jsonData.emails.count());",
									"var expected = Number(pm.environment.get(\"investor-emails-size\")) + 1;",
									"",
									"if(current == expected){",
									"    console.info(\"1 email recieved (1 transaction)\");",
									"} else {",
									"    console.info(\"Wait 10 secs\");",
									"    setTimeout(function(){}, 10000);",
									"    postman.setNextRequest(\"/api/admin/investors/{email}/emails - wait eth transaction emails\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/campaign/info - check campaign amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9fdc4122-f032-4658-90c1-ff60fa2ab293",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedEth is valid\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    console.info(\"jsonData.amountPreSaleInvestedEth: \" + jsonData.amountPreSaleInvestedEth);",
									"    var current = Number.parseFloat(jsonData.amountPreSaleInvestedEth).toFixed(5);",
									"    ",
									"    console.info(\"environment.amountPreSaleInvestedEth: \" + pm.environment.get(\"amountPreSaleInvestedEth\"));",
									"    var expected = (Number.parseFloat(pm.environment.get(\"amountPreSaleInvestedEth\")) + 0.8).toFixed(5);",
									"    ",
									"    pm.expect(expected).to.eql(current);",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedLogiToken was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountPreSaleInvestedLogiToken) > Number(pm.environment.get(\"amountPreSaleInvestedLogiToken\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedUsd was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountPreSaleInvestedUsd) > Number(pm.environment.get(\"amountPreSaleInvestedUsd\"))).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - check investor amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c4672395-195e-409f-9e8a-1392d7e26e34",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"amountEth is valid\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number.parseFloat(jsonData.amountEth).toFixed(5);",
									"    var expected = (Number.parseFloat(pm.environment.get(\"amountEth\")) + 0.8).toFixed(5);",
									"    ",
									"    pm.expect(expected).to.eql(current);",
									"});",
									"",
									"pm.test(\"amountUsd was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountUsd) > Number(pm.environment.get(\"amountUsd\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountLogiToken was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountLogiToken) > Number(pm.environment.get(\"amountLogiToken\"))).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions - check transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bf1c6384-97d8-40ee-86af-18402996a5f2",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Must have 1 new transaction\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.transactions.count());",
									"    var expected = Number(pm.environment.get(\"investor-transactions-size\")) + 1;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/history - check investor history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a2d51683-9eff-440a-a69c-d1a5f0c9d1bc",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"2 new record in profile history (increment amounts + kyc request)\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.items.count());",
									"    var expected = Number(pm.environment.get(\"investor-history-size\")) + 2;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/history",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"history"
							]
						},
						"description": "recheck investor changes history"
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "10663ccb-4ab7-4e65-a15a-7f9bf7ab8d6a",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "af927d6d-b87c-4ffc-8a17-0b7121813a7a",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Send ETH Transaction - Presale & Smarc90Logi10",
			"description": null,
			"item": [
				{
					"name": "/api/admin/campaign/info - remember campaign data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5316ab4b-ec8f-4d34-8af3-9b553e72ddd4",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember campaign data\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.environment.set(\"amountPreSaleInvestedBtc\", (typeof jsonData.amountPreSaleInvestedBtc === 'undefined') ? 0 : jsonData.amountPreSaleInvestedBtc);",
									"    pm.environment.set(\"amountPreSaleInvestedEth\", (typeof jsonData.amountPreSaleInvestedEth === 'undefined') ? 0 : jsonData.amountPreSaleInvestedEth);",
									"    pm.environment.set(\"amountPreSaleInvestedSmarcToken\", (typeof jsonData.amountPreSaleInvestedSmarcToken === 'undefined') ? 0 : jsonData.amountPreSaleInvestedSmarcToken);",
									"    pm.environment.set(\"amountPreSaleInvestedLogiToken\", (typeof jsonData.amountPreSaleInvestedLogiToken === 'undefined') ? 0 : jsonData.amountPreSaleInvestedLogiToken);",
									"    pm.environment.set(\"amountPreSaleInvestedUsd\", (typeof jsonData.amountPreSaleInvestedUsd === 'undefined') ? 0 : jsonData.amountPreSaleInvestedUsd);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - remember emails number",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Emails sent number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-emails-size\", (typeof jsonData.emails === 'undefined') ? 0 : jsonData.emails.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions - remember transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "98c845cd-7d7f-42bc-9042-a90952314ac8",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember transactions number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-transactions-size\", (typeof jsonData.transactions === 'undefined') ? 0 : jsonData.transactions.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - get pay-in address and amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3ff8729c-9204-4605-a78c-efed7a29dc87",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"Get data\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.environment.set(\"payInSmarc90Logi10EthAddress\", jsonData.payInSmarc90Logi10EthAddress);",
									"    pm.environment.set(\"amountEth\", jsonData.amountEth);",
									"    pm.environment.set(\"amountUsd\", jsonData.amountUsd);",
									"    pm.environment.set(\"amountLogiToken\", jsonData.amountLogiToken);",
									"    pm.environment.set(\"amountSmarcToken\", jsonData.amountSmarcToken);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/debug/eth/send/tx - send ether transaction to queue",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"{{email}}\",\r\n  \"payInAddress\": \"{{payInSmarc90Logi10EthAddress}}\",\r\n  \"amount\": 1\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/debug/eth/send/tx",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"eth",
								"send",
								"tx"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - wait eth transaction email 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5458ba0b-61a5-4f3f-aa01-8561667c1fd6",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"var current = Number(jsonData.emails.count());",
									"var expected = Number(pm.environment.get(\"investor-emails-size\")) + 1;",
									"",
									"if(current == expected){",
									"    console.info(\"1 email recieved (1 transaction)\");",
									"} else {",
									"    console.info(\"Wait 10 secs\");",
									"    setTimeout(function(){}, 10000);",
									"    postman.setNextRequest(\"/api/admin/investors/{email}/emails - wait eth transaction email 2\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/campaign/info - check campaign amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f335aedd-63df-4cf8-a17b-a747ced65462",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedEth is valid\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    console.info(\"jsonData.amountPreSaleInvestedEth: \" + jsonData.amountPreSaleInvestedEth);",
									"    var current = Number.parseFloat(jsonData.amountPreSaleInvestedEth).toFixed(5);",
									"    ",
									"    console.info(\"environment.amountPreSaleInvestedEth: \" + pm.environment.get(\"amountPreSaleInvestedEth\"));",
									"    var expected = (Number.parseFloat(pm.environment.get(\"amountPreSaleInvestedEth\")) + 1).toFixed(5);",
									"    ",
									"    pm.expect(expected).to.eql(current);",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedSmarcToken was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    var old = pm.environment.get(\"amountPreSaleInvestedSmarcToken\");",
									"    console.info(\"old: \" + old);",
									"    ",
									"    var current = jsonData.amountPreSaleInvestedSmarcToken;",
									"    console.info(\"current: \" + current);",
									"    ",
									"    pm.expect(Number(current) > Number(old)).to.be.true;",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedLogiToken was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountPreSaleInvestedLogiToken) > Number(pm.environment.get(\"amountPreSaleInvestedLogiToken\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedUsd was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountPreSaleInvestedUsd) > Number(pm.environment.get(\"amountPreSaleInvestedUsd\"))).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - check investor amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "65d1b4c3-e5b1-4d6f-b205-bbf79f03840f",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"amountEth is valid\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number.parseFloat(jsonData.amountEth).toFixed(5);",
									"    var expected = (Number.parseFloat(pm.environment.get(\"amountEth\")) + 1).toFixed(5);",
									"    ",
									"    pm.expect(expected).to.eql(current);",
									"});",
									"",
									"pm.test(\"amountUsd was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountUsd) > Number(pm.environment.get(\"amountUsd\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountSmarcToken was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountSmarcToken) > Number(pm.environment.get(\"amountSmarcToken\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountLogiToken was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountLogiToken) > Number(pm.environment.get(\"amountLogiToken\"))).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions - check transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bf1c6384-97d8-40ee-86af-18402996a5f2",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Must have 1 new transaction\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.transactions.count());",
									"    var expected = Number(pm.environment.get(\"investor-transactions-size\")) + 1;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "10663ccb-4ab7-4e65-a15a-7f9bf7ab8d6a",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "af927d6d-b87c-4ffc-8a17-0b7121813a7a",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Send Fiat Transaction - Presale & Smarc90Logi10",
			"description": null,
			"item": [
				{
					"name": "/api/admin/campaign/info - remember campaign data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5316ab4b-ec8f-4d34-8af3-9b553e72ddd4",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember campaign data\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.environment.set(\"amountPreSaleInvestedBtc\", (typeof jsonData.amountPreSaleInvestedBtc === 'undefined') ? 0 : jsonData.amountPreSaleInvestedBtc);",
									"    pm.environment.set(\"amountPreSaleInvestedEth\", (typeof jsonData.amountPreSaleInvestedEth === 'undefined') ? 0 : jsonData.amountPreSaleInvestedEth);",
									"    pm.environment.set(\"amountPreSaleInvestedSmarcToken\", (typeof jsonData.amountPreSaleInvestedSmarcToken === 'undefined') ? 0 : jsonData.amountPreSaleInvestedSmarcToken);",
									"    pm.environment.set(\"amountPreSaleInvestedLogiToken\", (typeof jsonData.amountPreSaleInvestedLogiToken === 'undefined') ? 0 : jsonData.amountPreSaleInvestedLogiToken);",
									"    pm.environment.set(\"amountPreSaleInvestedUsd\", (typeof jsonData.amountPreSaleInvestedUsd === 'undefined') ? 0 : jsonData.amountPreSaleInvestedUsd);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - remember emails number",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Emails sent number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-emails-size\", (typeof jsonData.emails === 'undefined') ? 0 : jsonData.emails.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions - remember transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "98c845cd-7d7f-42bc-9042-a90952314ac8",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember transactions number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-transactions-size\", (typeof jsonData.transactions === 'undefined') ? 0 : jsonData.transactions.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - get amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a457b393-0f7d-4f9e-a522-4c3f1011ee81",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"Get data\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.environment.set(\"amountEth\", jsonData.amountEth);",
									"    pm.environment.set(\"amountUsd\", jsonData.amountUsd);",
									"    pm.environment.set(\"amountLogiToken\", jsonData.amountLogiToken);",
									"    pm.environment.set(\"amountSmarcToken\", jsonData.amountSmarcToken);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - get confirmation token",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"Recheck and remember confirmation token\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.email).to.eql(pm.environment.get(\"email\"));",
									"",
									"    pm.environment.set(\"confirmation_token\", jsonData.confirmationToken);    ",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/investor/fiat - send fiat transaction to queue",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "authToken",
								"value": "{{confirmation_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"transactionId\": \"fiat_smarc90Logi10_1\",\r\n  \"type\": \"smarc90Logi10\",\r\n  \"amount\": 200,\r\n  \"fee\": 2.99\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/investor/fiat",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"investor",
								"fiat"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/emails - wait fiat transaction email",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5a2a7c7a-8ce3-4a9c-875b-e09474181ecd",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"var current = Number(jsonData.emails.count());",
									"var expected = Number(pm.environment.get(\"investor-emails-size\")) + 1;",
									"",
									"if(current == expected){",
									"    console.info(\"1 email recieved (1 transaction)\");",
									"} else {",
									"    console.info(\"Wait 10 secs\");",
									"    setTimeout(function(){}, 10000);",
									"    postman.setNextRequest(\"/api/admin/investors/{email}/emails - wait fiat transaction email\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/emails",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"emails"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/campaign/info - check campaign amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7d9a3c42-c04e-4e0c-8ffb-5598368e49b0",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedSmarcToken was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    var old = pm.environment.get(\"amountPreSaleInvestedSmarcToken\");",
									"    console.info(\"old: \" + old);",
									"    ",
									"    var current = jsonData.amountPreSaleInvestedSmarcToken;",
									"    console.info(\"current: \" + current);",
									"    ",
									"    pm.expect(Number(current) > Number(old)).to.be.true;",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedLogiToken was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountPreSaleInvestedLogiToken) > Number(pm.environment.get(\"amountPreSaleInvestedLogiToken\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountPreSaleInvestedUsd was increased\", function() {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountPreSaleInvestedUsd) > Number(pm.environment.get(\"amountPreSaleInvestedUsd\"))).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/campaign/info",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"campaign",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - check investor amounts",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "fc6eb5db-959b-45b7-a639-ab68be9c7eba",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"amountUsd was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountUsd) > Number(pm.environment.get(\"amountUsd\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountSmarcToken was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountSmarcToken) > Number(pm.environment.get(\"amountSmarcToken\"))).to.be.true;",
									"});",
									"",
									"pm.test(\"amountLogiToken was increased\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(Number(jsonData.amountLogiToken) > Number(pm.environment.get(\"amountLogiToken\"))).to.be.true;",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions - check transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bf1c6384-97d8-40ee-86af-18402996a5f2",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Must have 1 new transaction\", function () {",
									"    var jsonData = pm.response.json();",
									"    var current = Number(jsonData.transactions.count());",
									"    var expected = Number(pm.environment.get(\"investor-transactions-size\")) + 1;",
									"    ",
									"    pm.expect(current).to.eql(expected);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "10663ccb-4ab7-4e65-a15a-7f9bf7ab8d6a",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "af927d6d-b87c-4ffc-8a17-0b7121813a7a",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Send Out of Date Transaction",
			"description": "",
			"item": [
				{
					"name": "/api/admin/investors/{email}/transactions/failed - remember failed transaction",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5d43b354-927a-4b60-8e13-91484e13201a",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Remember refunds number\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.environment.set(\"investor-refunds-size\", (typeof jsonData.refunds === 'undefined') ? 0 : jsonData.refunds.count());",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions/failed",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions",
								"failed"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email} - get pay-in address",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "718f6b1a-d314-4dbf-9642-b2a314fb6583",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"pm.test(\"Get data\", function () {",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.environment.set(\"payInLogiEthAddress\", jsonData.payInLogiEthAddress);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/debug/eth/send/tx - send ether out of date transaction to queue",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"{{email}}\",\r\n  \"payInAddress\": \"{{payInLogiEthAddress}}\",\r\n  \"amount\": 0.2,\r\n  \"createdUtc\": \"2017-11-19T11:00:00.000Z\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/debug/eth/send/tx",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"debug",
								"eth",
								"send",
								"tx"
							]
						}
					},
					"response": []
				},
				{
					"name": "/api/admin/investors/{email}/transactions/failed - wait new failed transation record",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3e38fe41-2055-4d57-ad6f-7f1c12dc5c0b",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = JSON.parse(responseBody);",
									"var current = Number(jsonData.items.count());",
									"var expected = Number(pm.environment.get(\"investor-refunds-size\")) + 1;",
									"",
									"if(current == expected){",
									"    console.info(\"1 refund recieved\");",
									"} else {",
									"    console.info(\"Wait 10 secs\");",
									"    setTimeout(function(){}, 10000);",
									"    postman.setNextRequest(\"/api/admin/investors/{email}/transactions/failed - wait new failed transation record\");",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "adminAuthToken",
								"value": "{{admin_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"andrey.krivoshapov@lykke.com\"\r\n}"
						},
						"url": {
							"raw": "{{domain}}/api/admin/investors/{{email}}/transactions/failed",
							"host": [
								"{{domain}}"
							],
							"path": [
								"api",
								"admin",
								"investors",
								"{{email}}",
								"transactions",
								"failed"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "2571bf81-99d7-4d84-868e-edffab3c5a16",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "963333aa-22b4-49f8-927f-0d9909442602",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "096f7031-ac52-48ad-b23f-384a1a566cf0",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "bf833421-a4b3-45aa-aace-e263827c69f2",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}